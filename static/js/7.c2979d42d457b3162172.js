webpackJsonp([7],{CquY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("4YfN"),n=r.n(o),a=r("9rMa"),s=r("gyMJ"),i={name:"MyOrder",mounted:function(){var e=this;Object(s.p)({user_id:this.userInfo.user_id},this.userInfo.token).then(function(t){1===t.code&&e.SET_ORDERINFO(t.data)})},computed:n()({},Object(a.e)(["userInfo","orderInfo"])),methods:n()({},Object(a.d)(["SET_ORDERINFO"]),{ok:function(){var e=this;Object(s.i)({order_no:this.orderId,user_id:this.userInfo.user_id,goods_id:this.goodsId,label:this.formData.content,content:this.formData.content}).then(function(t){1===t.code?(e.$Message.success("评价成功"),e.modal=!1,e.evaluate=!1):e.$Message.error(t.msg)})},cancel:function(){this.$Message.info("Clicked cancel")},goToPay:function(e){this.$router.push({path:"/order",query:{orderId:this.orderInfo.data[e].order_no}})},reFound:function(e){Object(s.w)({user_id:this.userInfo.user_id,order_no:this.orderInfo.data[e].order_no})},Confirm:function(e){var t=this;Object(s.d)({order_no:this.orderInfo.data[e].order_no},this.userInfo.token),Object(s.p)({user_id:this.userInfo.user_id},this.userInfo.token).then(function(e){1===e.code&&t.SET_ORDERINFO(e.data)})},see:function(e){var t=this;this.modal=!0,this.orderId=this.orderInfo.data[e].order_no,console.log("orderId",this.orderId),Object(s.o)({order_no:this.orderId}).then(function(e){t.orderData=e.data})},evaluateFunc:function(e){this.evaluate=!0,this.goodsId=this.orderData.order_goods[e].goods_id,console.log("goodsId",this.goodsId)}}),data:function(){var e=this;return{formData:{content:""},evaluate:!1,modal:!1,orderId:"",goodsId:"",orderData:[],Datacolumns:[{title:"图片",key:"img",width:86,render:function(e,t){return e("div",[e("img",{attrs:{src:t.row.goods_image,class:"img",style:"display: inline-block;width: 70%;height: 70%;"}})])},align:"center"},{title:"标题",key:"goods_name",align:"center"},{title:"数量",key:"goods_num",width:68,align:"center"},{title:"价格",width:108,key:"goods_price",align:"center"},{title:"评价",render:function(t,r){return r.row.evaluate_status?r.row.is_evaluate?t("span","已评价"):t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.evaluateFunc(r.index)}}},"评价"):t("span","该订单状态不支持评价(可能您未收货)")},align:"center"}],columns:[{title:"订单号",key:"order_no",width:180,align:"center"},{title:"备注",key:"remark",align:"center"},{title:"价格",width:98,key:"goods_amount",align:"center"},{title:"快递方式",width:108,key:"remark",render:function(e,t){return e("span","默认")},align:"center"},{title:"创建时间",width:120,key:"create_time",render:function(e,t){return e("i-time",{props:{time:t.row.create_time}},t.row.create_time)},align:"center"},{title:"状态",width:120,key:"order_status",render:function(e,t){var r="默认";return"0"===t.row.order_status?r="未支付":"1"===t.row.order_status?r="已支付":"2"===t.row.order_status&&(r="已确认收货"),e("span",r)},align:"center"},{title:"操作",key:"action",width:300,align:"center",render:function(t,r){return t("div",[t("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.see(r.index)}}},"查看"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){0!==r.row.order_status?e.$Message.error("该订单您已支付"):e.goToPay(r.index)}}},"支付"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){r.row.order_status<=0?e.$Message.error("该订单您还未支付"):e.reFound(r.index)}}},"申请退款"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){r.row.order_status<=0?e.$Message.error("该订单您还未支付"):e.Confirm(r.index)}}},"确认收货")])}}]}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Table",{attrs:{border:"",columns:e.columns,data:e.orderInfo.data,size:"large","no-data-text":"你还有订单，快点去购物吧"}}),e._v(" "),r("div",{staticClass:"page-size"},[r("Page",{attrs:{current:e.orderInfo.current_page,total:e.orderInfo.total}})],1),e._v(" "),r("Modal",{attrs:{width:"630"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("商品详情")])]),e._v(" "),r("Table",{ref:"selection",attrs:{border:"",columns:e.Datacolumns,data:e.orderData.order_goods,size:"large","no-data-text":"暂无"}})],1),e._v(" "),r("Modal",{attrs:{width:"630"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.evaluate,callback:function(t){e.evaluate=t},expression:"evaluate"}},[r("p",{attrs:{slot:"header"},slot:"header"},[r("span",[e._v("商品评价")])]),e._v(" "),r("Form",{ref:"formData",attrs:{model:e.formData,"label-position":"left","label-width":60}},[r("FormItem",{attrs:{label:"填写评价"}},[r("i-input",{attrs:{size:"large"},model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1)],1)],1)],1)},staticRenderFns:[]};var l=r("C7Lr")(i,d,!1,function(e){r("uoaZ")},"data-v-c91b377c",null);t.default=l.exports},uoaZ:function(e,t){}});
//# sourceMappingURL=7.c2979d42d457b3162172.js.map